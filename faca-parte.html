<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <link rel="icon" type="image/png" href="assets/logo.png">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Fa√ßa Parte</title>
  <link rel="stylesheet" href="style.css">
  <script defer src="script.js"></script>
</head>
  <script type="module">
  import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

  // üîó Conex√£o com seu projeto Supabase
  const SUPABASE_URL = 'https://vwnzmmyoesrjqpthsstg.supabase.co'
  const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ3bnptbXlvZXNyanFwdGhzc3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NTIyMTAsImV4cCI6MjA3NzUyODIxMH0.F6z3GoZbC-htwzOZSlOnwZUbVOSbgCSbeFE1qskQihw'
  const supabase = createClient(SUPABASE_URL, SUPABASE_KEY)

  const form = document.getElementById('formInscricao')
  const notifOverlay = document.getElementById('notifOverlay')
  const notifClose = document.getElementById('notifClose')

  // Mostrar/ocultar descri√ß√£o quando "outros" for selecionado
  const motivoSelect = document.getElementById('motivo')
  const campoMotivo = document.getElementById('campoMotivo')
  motivoSelect.addEventListener('change', () => {
    campoMotivo.classList.toggle('d-none', motivoSelect.value !== 'outros')
  })

  // Enviar dados pro Supabase
  form.addEventListener('submit', async (e) => {
    e.preventDefault()

    const dados = {
      nome: document.getElementById('nome').value,
      idade: document.getElementById('idade').value,
      documento: document.getElementById('documento').value,
      telefone: document.getElementById('telefone').value,
      email: document.getElementById('email').value,
      area: document.getElementById('area').value,
      motivo: document.getElementById('motivo').value,
      descricao: document.getElementById('descricao').value || ''
    }

    const { error } = await supabase.from('inscricoes').insert([dados])

    if (error) {
      alert('Erro ao enviar: ' + error.message)
      console.error(error)
    } else {
      notifOverlay.removeAttribute('aria-hidden')
    }
  })

  notifClose.addEventListener('click', () => {
    notifOverlay.setAttribute('aria-hidden', 'true')
    form.reset()
  })
</script>

<body>

  <nav class="navbar">
    <div class="brand">
      <img src="assets/logo.png" alt="logo">
      <span class="min">| Minist√©rio da Defesa</span>
    </div>
    <ul class="nav-links">
      <li><a class="nav-link" href="index.html">In√≠cio</a></li>
      <li><a class="nav-link" href="quem-somos.html">Quem Somos</a></li>
      <li><a class="nav-link" href="operacoes.html">Opera√ß√µes</a></li>
      <li><a class="nav-link" href="hierarquia.html">Hierarquia</a></li>
      <li><a class="nav-link active" href="faca-parte.html">Fa√ßa Parte</a></li>
    </ul>
    <button id="btnEntrar" class="btn-outline-success">Entrar</button>
  </nav>

  <div class="container">
    <div class="form-card">
      <h3>Formul√°rio de Alistamento</h3>

      <form id="formInscricao">
        <input id="nome" placeholder="Nome" required /><br>
        <input id="idade" placeholder="Idade" type="number" required /><br>
        <input id="documento" placeholder="Documento (ID)" required /><br>
        <input id="telefone" placeholder="Telefone (IN-GAME)" required /><br>
        <input id="email" placeholder="E-mail (ID Discord)" required /><br>

        <!-- NOVO CAMPO: Qual √°rea -->
        <label for="area">Qual √°rea?</label>
        <select id="area" required>
          <option value="">Selecione</option>
          <option value="exercito">Ex√©rcito Brasileiro</option>
          <option value="fab">For√ßa A√©rea Brasileira</option>
          <option value="marinha">Marinha do Brasil</option>
        </select>

        <!-- Motivo -->
        <label for="motivo">Motivo</label>
        <select id="motivo" required>
          <option value="">Selecione</option>
          <option value="servir">Obrigat√≥rio</option>
          <option value="atrasado">Atrasado (at√© 45 anos)</option>
          <option value="outros">Outros</option>
        </select>

        <div id="campoMotivo" class="d-none">
          <textarea id="descricao" placeholder="Descreva o motivo"></textarea>
        </div>

        <br>
        <button type="submit" class="btn-outline-success">Enviar</button>
      </form>
    </div>
  </div>

  <!-- Notifica√ß√£o -->
  <div id="notifOverlay" class="notif-overlay" aria-hidden="true">
    <div class="notif-card">
      <img src="assets/logo.png" alt="logo">
      <h4>Alistamento enviado!</h4>
      <p>Seu pedido foi registrado com sucesso.</p>
      <button id="notifClose" class="btn-outline-success">Fechar</button>
    </div>
  </div>

</body>
</html>
